--- !hobix.com,2004/entry 
title: Building YARV 0.1.0
author: why
created: 2005-01-11 11:06:22.435918 -05:00
content: >
  Sasada Koichi just released his first proper version of his Ruby bytecode
  compiler and virtual machine, named "YARV":http://www.atdot.net/yarv/. While
  it's all still very experimental code, you can execute small scripts and run the
  benchmarking suite.  Certainly entertaining at least.


  Building YARV requires a patch to current Ruby 1.9 code.  You'll need to check
  out from CVS, then patch and build Ruby.


  <pre>
   cvs -z4 -d :pserver:anonymous@cvs.ruby-lang.org:/src co ruby
   cd ruby
   patch -l < ~/src/yarv-0.1.0/evalc.patch

   autoconf
   ./configure
   make
   make install
  </pre>


  *Make sure you use dash-lowercase-L as an option!  The whitespace between CVS
  and the patch is ambiguous.*


  Now, go to your YARV directory, build the extension and run the benchmarks.


  <pre>
   ruby extconf.rb
   make
   make benchmark
  </pre>


  I compiled on FreeBSD and it was necessary to use @gmake@ above rather than
  @make@.  The benchmarks take quite a while to run.  If you're impatient, you can
  get an inkling of the sort of speed YARV is seeing from the "Cygwin
  benchmarks":http://www.atdot.net/yarv/bench-20050110-rev120-cygwin.txt.
