--- !hobix.com,2004/entry 
title: Chipping Away At Hash Keys Reveals Human Futility
author: why
created: 2005-04-02 11:17:40.134401 -05:00
content: >-
  For the last few days, the Hobix list has been stumped trying to uncover why
  Ruby keeps throwing up a @can't modify frozen object@ exception.  We're just
  loading a YAML file that contains a list of plugins to load and optional
  settings for each plugin:


  <pre>
   - hobix/out/rss
   - hobix/out/atom
   - hobix/publish/ping: [http://ping.blo.gs:80/, http://rpc.weblogs.com:80/RPC2]
  </pre>


  The code was attempting to untaint the Hash keys if they looked like safe file
  paths.  But, since Hash keys are automatically frozen and immutable, Ruby throws
  an exception.  Fine, fine.  Lesson: make sure you @dup@ the Hash key before you
  need to modify it.


  The real confusion, though, lied with a variation between Ruby 1.8.2-2 and Ruby
  1.8.2-3 under Debian.  _It looks like the YAML module under 1.8.2-2 doesn't
  propagate the tainting flag._
