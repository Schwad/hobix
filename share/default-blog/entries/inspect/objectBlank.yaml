--- !hobix.com,2004/entry 
title: "Object#blank?"
author: why
created: 2005-03-04 12:31:51.665031 -05:00
content: >-
  So, I'd like to submit @Object#blank?@ as an RCR.  I use this code in nearly all
  of my web application projects.


  <pre>
   class Object
     def blank?
       if respond_to? :empty?
         empty?
       elsif respond_to? :zero?
         zero?
       else
         !self
       end
     end
   end
  </pre>


  This has been begging for addition into Ruby for years.  A bit of background:


  * *2000:* Jim Menard suggests "nil.empty?":/ruby-talk/7484-8460/7684.

  * *2002:* Dave Thomas starts to further work up
  "nil.empty?":/ruby-talk/43611-44681/43795.  Opposition brews.  (Note that the
  possibility of @nil@ becoming an Enumerable is kicked around!)

  * *2004:* "Zero is true ... whoda thunk?":/ruby-talk/100526-109991/100653 thread
  delves in and out of the character of @nil@, @0@, @""@ and so on.  However, the
  discussion really revolves around whether zero could be treated as false in a
  future Ruby incarnation.

  * *2005:* Just last month, Dan Fitzpatrick "revisited the same
  nil.empty?":/ruby-talk/131829-132674/132036 pitch we've seen in years past.


  In all, the two major points of backlash have been:


  # Naming the thing.  Some feel that @empty?@ implies a container.  A container
  which isn't there for @nil@ and @0@.  Another suggestion was @vapid?@ but, uh,
  no.

  # That there is no case in which @0@ should be grouped with @nil@ and @""@.  I
  suppose many people are more commonly looking for @"0"@ to belong to this group
  as well.  Which means you have to use @.to_i.zero?@.  Very similar to
  @.to_s.empty?@.


  I'm thinking @Object#blank?@ is a good solution.  The name doesn't imply a
  container.  It implies valuelessness, which is what we are testing for.


  This reduces the common case of:


  <pre>
   if venue['neighborhood'].to_s.empty?
  </pre>


  To:


  <pre>
   if venue['neighborhood'].blank?
  </pre>


  I've grouped @0@ in there as well.  It's useful for YAML.  Since YAML loads
  types naturally, you rarely run into a string like @"0"@.  And since I'm calling
  @zero?@, it works for floats as well.


  Given this YAML invoice:


  <pre>
   sku:   BSK115
   price: 15.60
   tax:   0.00
   total: 15.60
  </pre>


  I can easily check the @tax@, covering the case in which the @tax@ is completely
  left out.


  <pre>
   print "Tax-free" if invoice['tax'].blank?
  </pre>


  So, what do you think?  Worthwhile RCR?  Am I off on the name?  Has our time
  come for this at last?


  <div class="update">


  I've just submitted this proposal as "RCR 295":http://rcrchive.net/rcr/show/295,
  which also weighs the possibility of a @to_b@ conversion.  This may kill the
  RCR, but I'd like to vote and ultimately find the best solution.  I still prefer
  @Object#blank?@.  But either is a move ahead.


  </div>
