<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Hobix::WebApp - The Book of Hobix</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-3C-3C">#&lt;&lt;</a>
    
    <li ><a href="#method-i-_GET">#_GET</a>
    
    <li ><a href="#method-i-_POST">#_POST</a>
    
    <li ><a href="#method-i-absuri">#absuri</a>
    
    <li ><a href="#method-i-action_uri">#action_uri</a>
    
    <li ><a href="#method-i-add_header">#add_header</a>
    
    <li ><a href="#method-i-check_last_modified">#check_last_modified</a>
    
    <li ><a href="#method-i-clear_header">#clear_header</a>
    
    <li ><a href="#method-i-content_type">#content_type</a>
    
    <li ><a href="#method-i-content_type-3D">#content_type=</a>
    
    <li ><a href="#method-i-each_header">#each_header</a>
    
    <li ><a href="#method-i-each_request_header">#each_request_header</a>
    
    <li ><a href="#method-i-get_header">#get_header</a>
    
    <li ><a href="#method-i-get_request_header">#get_request_header</a>
    
    <li ><a href="#method-i-has_header-3F">#has_header?</a>
    
    <li ><a href="#method-i-make_absolute_uri">#make_absolute_uri</a>
    
    <li ><a href="#method-i-make_relative_uri">#make_relative_uri</a>
    
    <li ><a href="#method-i-open_resource">#open_resource</a>
    
    <li ><a href="#method-i-path_info">#path_info</a>
    
    <li ><a href="#method-i-print">#print</a>
    
    <li ><a href="#method-i-printf">#printf</a>
    
    <li ><a href="#method-i-putc">#putc</a>
    
    <li ><a href="#method-i-puts">#puts</a>
    
    <li ><a href="#method-i-query_html_get_application_x_www_form_urlencoded">#query_html_get_application_x_www_form_urlencoded</a>
    
    <li ><a href="#method-i-query_html_post_application_x_www_form_urlencoded">#query_html_post_application_x_www_form_urlencoded</a>
    
    <li ><a href="#method-i-query_string">#query_string</a>
    
    <li ><a href="#method-i-reluri">#reluri</a>
    
    <li ><a href="#method-i-remote_addr">#remote_addr</a>
    
    <li ><a href="#method-i-remove_header">#remove_header</a>
    
    <li ><a href="#method-i-request_body">#request_body</a>
    
    <li ><a href="#method-i-request_content_type">#request_content_type</a>
    
    <li ><a href="#method-i-request_method">#request_method</a>
    
    <li ><a href="#method-i-request_uri">#request_uri</a>
    
    <li ><a href="#method-i-resource_path">#resource_path</a>
    
    <li ><a href="#method-i-script_name">#script_name</a>
    
    <li ><a href="#method-i-send_not_found">#send_not_found</a>
    
    <li ><a href="#method-i-send_resource">#send_resource</a>
    
    <li ><a href="#method-i-send_unauthorized">#send_unauthorized</a>
    
    <li ><a href="#method-i-server_name">#server_name</a>
    
    <li ><a href="#method-i-server_port">#server_port</a>
    
    <li ><a href="#method-i-server_protocol">#server_protocol</a>
    
    <li ><a href="#method-i-set_header">#set_header</a>
    
    <li ><a href="#method-i-setup_redirection">#setup_redirection</a>
    
    <li ><a href="#method-i-write">#write</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Hobix::WebApp">
  <h1 id="class-Hobix::WebApp" class="class">
    class Hobix::WebApp
  </h1>

  <section class="description">
    
  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="DocType">DocType
        
        <dd>
        
      
        <dt id="DocType_C">DocType_C
        
        <dd>
        
      
        <dt id="ExternalID_C">ExternalID_C
        
        <dd>
        
      
        <dt id="NameChar">NameChar
        
        <dd>
        
      
        <dt id="NameExp">NameExp
        
        <dd>
        
      
        <dt id="PubidLiteral_C">PubidLiteral_C
        
        <dd>
        
      
        <dt id="SystemLiteral_C">SystemLiteral_C
        
        <dd>
        
      
        <dt id="WebAPPDevelopHost">WebAPPDevelopHost
        
        <dd>
        
      
        <dt id="XmlDecl">XmlDecl
        
        <dd>
        
      
        <dt id="XmlDecl_C">XmlDecl_C
        
        <dd>
        
      
        <dt id="XmlEncName">XmlEncName
        
        <dd>
        
      
        <dt id="XmlEncodingDecl">XmlEncodingDecl
        
        <dd>
        
      
        <dt id="XmlEncodingDecl_C">XmlEncodingDecl_C
        
        <dd>
        
      
        <dt id="XmlSDDecl">XmlSDDecl
        
        <dd>
        
      
        <dt id="XmlSDDecl_C">XmlSDDecl_C
        
        <dd>
        
      
        <dt id="XmlVersionInfo">XmlVersionInfo
        
        <dd>
        
      
        <dt id="XmlVersionInfo_C">XmlVersionInfo_C
        
        <dd>
        
      
        <dt id="XmlVersionNum">XmlVersionNum
        
        <dd>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-3C-3C" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">&lt;&lt;</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="3C-3C-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">69</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">&lt;&lt;</span>(<span class="ruby-identifier">str</span>) <span class="ruby-ivar">@response_body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-_GET" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_GET</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="_GET-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num"> 94</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">_GET</span>() 
<span class="line-num"> 95</span>   <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@_get_vars</span>
<span class="line-num"> 96</span>     <span class="ruby-ivar">@_get_vars</span> = {}
<span class="line-num"> 97</span>     <span class="ruby-identifier">query_html_get_application_x_www_form_urlencoded</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
<span class="line-num"> 98</span>       <span class="ruby-identifier">v</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-regexp">/\r\n/</span>, <span class="ruby-string">&quot;\n&quot;</span> ) <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">gsub!</span>
<span class="line-num"> 99</span>       <span class="ruby-ivar">@_get_vars</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>
<span class="line-num">100</span>     <span class="ruby-keyword">end</span>
<span class="line-num">101</span>   <span class="ruby-keyword">end</span>
<span class="line-num">102</span>   <span class="ruby-ivar">@_get_vars</span>
<span class="line-num">103</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-_POST" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">_POST</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="_POST-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">105</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">_POST</span>()
<span class="line-num">106</span>   <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@_post_vars</span>
<span class="line-num">107</span>     <span class="ruby-ivar">@_post_vars</span> = {}
<span class="line-num">108</span>     <span class="ruby-identifier">query_html_post_application_x_www_form_urlencoded</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
<span class="line-num">109</span>       <span class="ruby-identifier">v</span>.<span class="ruby-identifier">gsub!</span>( <span class="ruby-regexp">/\r\n/</span>, <span class="ruby-string">&quot;\n&quot;</span> ) <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">gsub!</span>
<span class="line-num">110</span>       <span class="ruby-ivar">@_post_vars</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">v</span>
<span class="line-num">111</span>     <span class="ruby-keyword">end</span>
<span class="line-num">112</span>   <span class="ruby-keyword">end</span>
<span class="line-num">113</span>   <span class="ruby-ivar">@_post_vars</span>
<span class="line-num">114</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-absuri" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">absuri</span><span
            class="method-args">(hash={})</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="WebApp.html#method-i-make_absolute_uri">make_absolute_uri</a>
        </div>
        
      </div>

    
      <div id="method-i-action_uri" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">action_uri</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="action_uri-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">92</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">action_uri</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">action_uri</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_header</span><span
            class="method-args">(field_name, field_body)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_header-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">117</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add_header</span>(<span class="ruby-identifier">field_name</span>, <span class="ruby-identifier">field_body</span>) <span class="ruby-ivar">@response_header</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">field_name</span>, <span class="ruby-identifier">field_body</span>) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-check_last_modified" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">check_last_modified</span><span
            class="method-args">(last_modified) { || ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="check_last_modified-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">209</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">check_last_modified</span>(<span class="ruby-identifier">last_modified</span>)
<span class="line-num">210</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">ims</span> = <span class="ruby-ivar">@request_header</span>[<span class="ruby-string">&#39;If-Modified-Since&#39;</span>] <span class="ruby-keyword">and</span>
<span class="line-num">211</span>      ((<span class="ruby-identifier">ims</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">httpdate</span>(<span class="ruby-identifier">ims</span>)) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>) <span class="ruby-keyword">and</span>
<span class="line-num">212</span>      <span class="ruby-identifier">last_modified</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">ims</span>
<span class="line-num">213</span>     <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">status_line</span> = <span class="ruby-string">&#39;304 Not Modified&#39;</span>
<span class="line-num">214</span>     <span class="ruby-keyword">return</span>
<span class="line-num">215</span>   <span class="ruby-keyword">end</span>
<span class="line-num">216</span>   <span class="ruby-ivar">@response_header</span>.<span class="ruby-identifier">set</span> <span class="ruby-string">&#39;Last-Modified&#39;</span>, <span class="ruby-identifier">last_modified</span>.<span class="ruby-identifier">httpdate</span>
<span class="line-num">217</span>   <span class="ruby-keyword">yield</span>
<span class="line-num">218</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-clear_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">clear_header</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="clear_header-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">119</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">clear_header</span>() <span class="ruby-ivar">@response_header</span>.<span class="ruby-identifier">clear</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_type</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_type-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">129</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">content_type</span>
<span class="line-num">130</span>   <span class="ruby-ivar">@response_header</span>[<span class="ruby-string">&#39;Content-Type&#39;</span>]
<span class="line-num">131</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-content_type-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">content_type=</span><span
            class="method-args">(media_type)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="content_type-3D-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">126</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">content_type=</span>(<span class="ruby-identifier">media_type</span>)
<span class="line-num">127</span>   <span class="ruby-ivar">@response_header</span>.<span class="ruby-identifier">set</span> <span class="ruby-string">&#39;Content-Type&#39;</span>, <span class="ruby-identifier">media_type</span>
<span class="line-num">128</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-each_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_header</span><span
            class="method-args">() { |field_name, field_body| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="each_header-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">122</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">each_header</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yields: field_name, field_body</span>
<span class="line-num">123</span>   <span class="ruby-ivar">@response_header</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">124</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-each_request_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_request_header</span><span
            class="method-args">() { |field_name, field_body| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="each_request_header-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">76</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">each_request_header</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment"># :yields: field_name, field_body</span>
<span class="line-num">77</span>   <span class="ruby-ivar">@request_header</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">78</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_header</span><span
            class="method-args">(field_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="get_header-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">121</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_header</span>(<span class="ruby-identifier">field_name</span>) <span class="ruby-ivar">@response_header</span>[<span class="ruby-identifier">field_name</span>] <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-get_request_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_request_header</span><span
            class="method-args">(field_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="get_request_header-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">79</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_request_header</span>(<span class="ruby-identifier">field_name</span>) <span class="ruby-ivar">@request_header</span>[<span class="ruby-identifier">field_name</span>] <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_header-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">has_header?</span><span
            class="method-args">(field_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="has_header-3F-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">120</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">has_header?</span>(<span class="ruby-identifier">field_name</span>) <span class="ruby-ivar">@response_header</span>.<span class="ruby-identifier">has?</span>(<span class="ruby-identifier">field_name</span>) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-make_absolute_uri" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            make_absolute_uri(:script=&gt;string, :path_info=&gt;string, :query=&gt;query, :fragment=&gt;string) &rarr; URI
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p><a href="WebApp.html#method-i-make_absolute_uri"><code>make_absolute_uri</code></a> returns a absolute URI which base URI is the URI of the web application is invoked.</p>

<p>The argument is same as make_relative_uri.</p>
          
          

          
          <div class="method-source-code" id="make_absolute_uri-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">272</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">make_absolute_uri</span>(<span class="ruby-identifier">hash</span>={})
<span class="line-num">273</span>   <span class="ruby-ivar">@urigen</span>.<span class="ruby-identifier">make_absolute_uri</span>(<span class="ruby-identifier">hash</span>)
<span class="line-num">274</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="WebApp.html#method-i-absuri">absuri</a>
        </div>
        

        
      </div>

    
      <div id="method-i-make_relative_uri" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            reluri(:script=&gt;string, :path_info=&gt;string, :query=&gt;query, :fragment=&gt;string) &rarr; URI
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            make_relative_uri(:script=&gt;string, :path_info=&gt;string, :query=&gt;query, :fragment=&gt;string) &rarr; URI
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <pre>make_relative_uri returns a relative URI which base URI is the URI the
web application is invoked.

The argument should be a hash which may have following components.
- :script specifies script_name relative from the directory containing
  the web application script.
  If it is not specified, the web application itself is assumed.
- :path_info specifies path_info component for calling web application.
  It should begin with a slash.
  If it is not specified, &quot;&quot; is assumed.
- :query specifies query a component.
  It should be a Hash or a WebApp::QueryString.
- :fragment specifies a fragment identifier.
  If it is not specified, a fragment identifier is not appended to
  the result URL.

Since the method escapes the components properly,
you should specify them in unescaped form.

In the example follow, assume that the web application bar.cgi is invoked
as http://host/foo/bar.cgi/baz/qux.

  webapp.reluri(:path_info=&gt;&quot;/hoge&quot;) =&gt; URI(&quot;../hoge&quot;)
  webapp.reluri(:path_info=&gt;&quot;/baz/fuga&quot;) =&gt; URI(&quot;fuga&quot;)
  webapp.reluri(:path_info=&gt;&quot;/baz/&quot;) =&gt; URI(&quot;./&quot;)
  webapp.reluri(:path_info=&gt;&quot;/&quot;) =&gt; URI(&quot;../&quot;)
  webapp.reluri() =&gt; URI(&quot;../../bar.cgi&quot;)
  webapp.reluri(:script=&gt;&quot;funyo.cgi&quot;) =&gt; URI(&quot;../../funyo.cgi&quot;)
  webapp.reluri(:script=&gt;&quot;punyo/gunyo.cgi&quot;) =&gt; URI(&quot;../../punyo/gunyo.cgi&quot;)
  webapp.reluri(:script=&gt;&quot;../genyo.cgi&quot;) =&gt; URI(&quot;../../../genyo.cgi&quot;)
  webapp.reluri(:fragment=&gt;&quot;sec1&quot;) =&gt; URI(&quot;../../bar.cgi#sec1&quot;)</pre>

<p>)</p>

<pre>webapp.reluri(:path_info=&gt;&quot;/h?#o/x y&quot;) =&gt; URI(&quot;../h%3F%23o/x%20y&quot;)
webapp.reluri(:script=&gt;&quot;ho%o.cgi&quot;) =&gt; URI(&quot;../../ho%25o.cgi&quot;)
webapp.reluri(:fragment=&gt;&quot;sp ce&quot;) =&gt; URI(&quot;../../bar.cgi#sp%20ce&quot;)</pre>
          
          

          
          <div class="method-source-code" id="make_relative_uri-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">260</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">make_relative_uri</span>(<span class="ruby-identifier">hash</span>={})
<span class="line-num">261</span>   <span class="ruby-ivar">@urigen</span>.<span class="ruby-identifier">make_relative_uri</span>(<span class="ruby-identifier">hash</span>)
<span class="line-num">262</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="WebApp.html#method-i-reluri">reluri</a>
        </div>
        

        
      </div>

    
      <div id="method-i-open_resource" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            open_resource(path)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        <div class="method-heading">
          <span class="method-callseq">
            open_resource(path) {|io| ... }
          </span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>opens <em>path</em> as relative from a web application directory.</p>
          
          

          
          <div class="method-source-code" id="open_resource-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">157</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">open_resource</span>(<span class="ruby-identifier">path</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) 
<span class="line-num">158</span>   <span class="ruby-identifier">resource_path</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">open</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="line-num">159</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-path_info" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">path_info</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="path_info-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">86</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">path_info</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">path_info</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-print" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">print</span><span
            class="method-args">(*strs)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="print-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">70</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">print</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">strs</span>) <span class="ruby-ivar">@response_body</span>.<span class="ruby-identifier">print</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">strs</span>) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-printf" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">printf</span><span
            class="method-args">(fmt, *args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="printf-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">71</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">printf</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>) <span class="ruby-ivar">@response_body</span>.<span class="ruby-identifier">printf</span>(<span class="ruby-identifier">fmt</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-putc" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">putc</span><span
            class="method-args">(ch)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="putc-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">72</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">putc</span>(<span class="ruby-identifier">ch</span>) <span class="ruby-ivar">@response_body</span>.<span class="ruby-identifier">putc</span> <span class="ruby-identifier">ch</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-puts" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">puts</span><span
            class="method-args">(*strs)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="puts-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">73</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">puts</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">strs</span>) <span class="ruby-ivar">@response_body</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">strs</span>) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-query_html_get_application_x_www_form_urlencoded" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">query_html_get_application_x_www_form_urlencoded</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="query_html_get_application_x_www_form_urlencoded-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">364</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">query_html_get_application_x_www_form_urlencoded</span>
<span class="line-num">365</span>   <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">query_string</span>.<span class="ruby-identifier">decode_as_application_x_www_form_urlencoded</span>
<span class="line-num">366</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-query_html_post_application_x_www_form_urlencoded" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">query_html_post_application_x_www_form_urlencoded</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="query_html_post_application_x_www_form_urlencoded-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">368</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">query_html_post_application_x_www_form_urlencoded</span>
<span class="line-num">369</span>   <span class="ruby-keyword">if</span> <span class="ruby-regexp">/\Apost\z/i</span> <span class="ruby-operator">=~</span> <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">request_method</span> <span class="ruby-comment"># xxx: should not check?</span>
<span class="line-num">370</span>     <span class="ruby-identifier">q</span> = <span class="ruby-constant">QueryString</span>.<span class="ruby-identifier">primitive_new_for_raw_query_string</span>(<span class="ruby-ivar">@request</span>.<span class="ruby-identifier">body_object</span>.<span class="ruby-identifier">read</span>)
<span class="line-num">371</span>     <span class="ruby-keyword">if</span> <span class="ruby-regexp">%r|\Amultipart/form-data.*boundary=\&quot;?([^\&quot;;,]+)\&quot;?|n</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">request_content_type</span>)
<span class="line-num">372</span>       <span class="ruby-identifier">boundary</span> = <span class="ruby-node">$1</span>.<span class="ruby-identifier">dup</span> 
<span class="line-num">373</span>       <span class="ruby-identifier">q</span>.<span class="ruby-identifier">decode_as_multipart_form_data</span> <span class="ruby-identifier">boundary</span>
<span class="line-num">374</span>     <span class="ruby-keyword">else</span>
<span class="line-num">375</span>       <span class="ruby-identifier">q</span>.<span class="ruby-identifier">decode_as_application_x_www_form_urlencoded</span>
<span class="line-num">376</span>     <span class="ruby-keyword">end</span>
<span class="line-num">377</span>   <span class="ruby-keyword">else</span>
<span class="line-num">378</span>     <span class="ruby-comment"># xxx: warning?</span>
<span class="line-num">379</span>     <span class="ruby-constant">HTMLFormQuery</span>.<span class="ruby-identifier">new</span>
<span class="line-num">380</span>   <span class="ruby-keyword">end</span>
<span class="line-num">381</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-query_string" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">query_string</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="query_string-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">87</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">query_string</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">query_string</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reluri" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">reluri</span><span
            class="method-args">(hash={})</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="WebApp.html#method-i-make_relative_uri">make_relative_uri</a>
        </div>
        
      </div>

    
      <div id="method-i-remote_addr" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remote_addr</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remote_addr-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">89</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remote_addr</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">remote_addr</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-remove_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">remove_header</span><span
            class="method-args">(field_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="remove_header-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">118</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">remove_header</span>(<span class="ruby-identifier">field_name</span>) <span class="ruby-ivar">@response_header</span>.<span class="ruby-identifier">remove</span>(<span class="ruby-identifier">field_name</span>) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-request_body" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">request_body</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="request_body-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">82</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">request_body</span>() <span class="ruby-ivar">@request_body</span>.<span class="ruby-identifier">string</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-request_content_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">request_content_type</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="request_content_type-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">90</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">request_content_type</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">content_type</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-request_method" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">request_method</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="request_method-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">81</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">request_method</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">request_method</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-request_uri" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">request_uri</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="request_uri-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">91</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">request_uri</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">request_uri</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resource_path" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resource_path</span><span
            class="method-args">(arg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>returns a Pathname object. <em>path</em> is interpreted as a relative path from the directory which a web application exists.</p>

<p>If /home/user/public_html/foo/bar.cgi is a web application which <a href="WebApp.html"><code>WebApp</code></a> {} calls, webapp.resource_path(“baz”) returns a pathname points to /home/user/public_html/foo/baz.</p>

<p><em>path</em> must not have “..” component and must not be absolute. Otherwise ArgumentError is raised.</p>
          
          

          
          <div class="method-source-code" id="resource_path-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">143</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">resource_path</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">144</span>   <span class="ruby-identifier">path</span> = <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">arg</span>)
<span class="line-num">145</span>   <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;absolute path: #{arg.inspect}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">path</span>.<span class="ruby-identifier">relative?</span>
<span class="line-num">146</span>   <span class="ruby-identifier">path</span>.<span class="ruby-identifier">each_filename</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
<span class="line-num">147</span>     <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;path contains .. : #{arg.inspect}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">f</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;..&#39;</span>
<span class="line-num">148</span>   }
<span class="line-num">149</span>   <span class="ruby-ivar">@manager</span>.<span class="ruby-identifier">resource_basedir</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">path</span>
<span class="line-num">150</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-script_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">script_name</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="script_name-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">85</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">script_name</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">script_name</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-send_not_found" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">send_not_found</span><span
            class="method-args">(msg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="send_not_found-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">181</span>   <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">send_not_found</span>(<span class="ruby-identifier">msg</span>)
<span class="line-num">182</span>     <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">status_line</span> = <span class="ruby-string">&#39;404 Not Found&#39;</span>
<span class="line-num">183</span>     <span class="ruby-ivar">@response_body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">&lt;&lt;End</span>
<span class="line-num">184</span> <span class="ruby-value">&lt;html&gt;
<span class="line-num">185</span>   &lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;
<span class="line-num">186</span>   &lt;body&gt;
<span class="line-num">187</span>     &lt;h1&gt;404 Not Found&lt;/h1&gt;
<span class="line-num">188</span>     &lt;p&gt;#{msg}&lt;/p&gt;
<span class="line-num">189</span>     &lt;hr /&gt;
<span class="line-num">190</span>     &lt;small&gt;&lt;a href=&quot;http://hobix.com/&quot;&gt;hobix&lt;/a&gt; #{ Hobix::VERSION } / &lt;a href=&quot;http://docs.hobix.com&quot;&gt;docs&lt;/a&gt; / &lt;a href=&quot;http://let.us.all.hobix.com&quot;&gt;wiki&lt;/a&gt; / &lt;a href=&quot;http://google.com/search?q=hobix+#{ URI.escape action_uri }&quot;&gt;search google for this action&lt;/a&gt;&lt;/small&gt;
<span class="line-num">191</span>   &lt;/body&gt;
<span class="line-num">192</span> &lt;/html&gt;
<span class="line-num">193</span> </span><span class="ruby-identifier">End</span>
<span class="line-num">194</span>   <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-send_resource" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            send_resource(path)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>send the resource indicated by <em>path</em>. Last-Modified: and If-Modified-Since: header is supported.</p>
          
          

          
          <div class="method-source-code" id="send_resource-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">166</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">send_resource</span>(<span class="ruby-identifier">path</span>)
<span class="line-num">167</span>   <span class="ruby-identifier">path</span> = <span class="ruby-identifier">resource_path</span>(<span class="ruby-identifier">path</span>)
<span class="line-num">168</span>   <span class="ruby-keyword">begin</span>
<span class="line-num">169</span>     <span class="ruby-identifier">mtime</span> = <span class="ruby-identifier">path</span>.<span class="ruby-identifier">mtime</span>
<span class="line-num">170</span>   <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
<span class="line-num">171</span>     <span class="ruby-identifier">send_not_found</span> <span class="ruby-node">&quot;Resource not found: #{path}&quot;</span>
<span class="line-num">172</span>     <span class="ruby-keyword">return</span>
<span class="line-num">173</span>   <span class="ruby-keyword">end</span>
<span class="line-num">174</span>   <span class="ruby-identifier">check_last_modified</span>(<span class="ruby-identifier">path</span>.<span class="ruby-identifier">mtime</span>) {
<span class="line-num">175</span>     <span class="ruby-identifier">path</span>.<span class="ruby-identifier">open</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
<span class="line-num">176</span>       <span class="ruby-ivar">@response_body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">read</span>
<span class="line-num">177</span>     }
<span class="line-num">178</span>   }
<span class="line-num">179</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-send_unauthorized" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">send_unauthorized</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="send_unauthorized-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">196</span>   <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">send_unauthorized</span>
<span class="line-num">197</span>     <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">status_line</span> = <span class="ruby-string">&#39;401 Unauthorized&#39;</span>
<span class="line-num">198</span>     <span class="ruby-ivar">@response_body</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">&lt;&lt;End</span>
<span class="line-num">199</span> <span class="ruby-value">&lt;html&gt;
<span class="line-num">200</span>   &lt;head&gt;&lt;title&gt;401 Unauthorized&lt;/title&gt;&lt;/head&gt;
<span class="line-num">201</span>   &lt;body&gt;
<span class="line-num">202</span>     &lt;h1&gt;401 Authorized&lt;/h1&gt;
<span class="line-num">203</span>     &lt;p&gt;You lack decent credentials to enter herein.&lt;/p&gt;
<span class="line-num">204</span>   &lt;/body&gt;
<span class="line-num">205</span> &lt;/html&gt;
<span class="line-num">206</span> </span><span class="ruby-identifier">End</span>
<span class="line-num">207</span>   <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-server_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">server_name</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="server_name-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">83</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">server_name</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">server_name</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-server_port" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">server_port</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="server_port-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">84</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">server_port</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">server_port</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-server_protocol" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">server_protocol</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="server_protocol-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">88</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">server_protocol</span>() <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">server_protocol</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-set_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_header</span><span
            class="method-args">(field_name, field_body)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="set_header-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">116</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">set_header</span>(<span class="ruby-identifier">field_name</span>, <span class="ruby-identifier">field_body</span>) <span class="ruby-ivar">@response_header</span>.<span class="ruby-identifier">set</span>(<span class="ruby-identifier">field_name</span>, <span class="ruby-identifier">field_body</span>) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-setup_redirection" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">setup_redirection</span><span
            class="method-args">(status, uri)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>setup_redirect makes a status line and a Location header appropriate as redirection.</p>

<p><em>status</em> specifies the status line. It should be a Fixnum 3xx or String &#39;3xx …&#39;.</p>

<p><em>uri</em> specifies the Location header body. It should be a URI, String or Hash. If a Hash is given, <a href="WebApp.html#method-i-make_absolute_uri"><code>make_absolute_uri</code></a> is called to convert to URI. If given URI is relative, it is converted as absolute URI.</p>
          
          

          
          <div class="method-source-code" id="setup_redirection-source">
            <pre>    <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">332</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">setup_redirection</span>(<span class="ruby-identifier">status</span>, <span class="ruby-identifier">uri</span>)
<span class="line-num">333</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">status</span>
<span class="line-num">334</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Fixnum</span>
<span class="line-num">335</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">status</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">300</span> <span class="ruby-operator">||</span> <span class="ruby-value">400</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">status</span>
<span class="line-num">336</span>       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unexpected status: #{status.inspect}&quot;</span>
<span class="line-num">337</span>     <span class="ruby-keyword">end</span>
<span class="line-num">338</span>     <span class="ruby-identifier">status</span> = <span class="ruby-node">&quot;#{status} #{StatusMessage[status]}&quot;</span>
<span class="line-num">339</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span>
<span class="line-num">340</span>     <span class="ruby-keyword">unless</span> <span class="ruby-regexp">/\A3\d\d(\z| )/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">status</span>
<span class="line-num">341</span>       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unexpected status: #{status.inspect}&quot;</span>
<span class="line-num">342</span>     <span class="ruby-keyword">end</span>
<span class="line-num">343</span>     <span class="ruby-keyword">if</span> <span class="ruby-identifier">status</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>
<span class="line-num">344</span>       <span class="ruby-identifier">status</span> = <span class="ruby-node">&quot;#{status} #{StatusMessage[status.to_i]}&quot;</span>
<span class="line-num">345</span>     <span class="ruby-keyword">end</span>
<span class="line-num">346</span>   <span class="ruby-keyword">else</span>
<span class="line-num">347</span>     <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unexpected status: #{status.inspect}&quot;</span>
<span class="line-num">348</span>   <span class="ruby-keyword">end</span>
<span class="line-num">349</span>   <span class="ruby-keyword">case</span> <span class="ruby-identifier">uri</span>
<span class="line-num">350</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">URI</span>
<span class="line-num">351</span>     <span class="ruby-identifier">uri</span> = <span class="ruby-ivar">@urigen</span>.<span class="ruby-identifier">base_uri</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">uri</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">relative?</span>
<span class="line-num">352</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span>
<span class="line-num">353</span>     <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri</span>)
<span class="line-num">354</span>     <span class="ruby-identifier">uri</span> = <span class="ruby-ivar">@urigen</span>.<span class="ruby-identifier">base_uri</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">uri</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">relative?</span>
<span class="line-num">355</span>   <span class="ruby-keyword">when</span> <span class="ruby-constant">Hash</span>
<span class="line-num">356</span>     <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">make_absolute_uri</span>(<span class="ruby-identifier">uri</span>)
<span class="line-num">357</span>   <span class="ruby-keyword">else</span>
<span class="line-num">358</span>     <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unexpected uri: #{uri.inspect}&quot;</span>
<span class="line-num">359</span>   <span class="ruby-keyword">end</span>
<span class="line-num">360</span>   <span class="ruby-ivar">@response</span>.<span class="ruby-identifier">status_line</span> = <span class="ruby-identifier">status</span>
<span class="line-num">361</span>   <span class="ruby-ivar">@response_header</span>.<span class="ruby-identifier">set</span> <span class="ruby-string">&#39;Location&#39;</span>, <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">to_s</span>
<span class="line-num">362</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-write" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">write</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="write-source">
            <pre>   <span class="ruby-comment"># File lib/hobix/webapp.rb</span>
<span class="line-num">74</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">write</span>(<span class="ruby-identifier">str</span>) <span class="ruby-ivar">@response_body</span>.<span class="ruby-identifier">write</span> <span class="ruby-identifier">str</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>

</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.1.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

